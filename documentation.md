# FormForge

#### Data-driven form generation in Kotlin

## Goals

FormForge is designed to be a data-driven form personalization/generation tool.

## Terminology

FormForge uses some non-standard, blacksmith inspired terms such as:

### Anvil

An `Anvil` is the container for the base of the form, this may be a predefined template document or a blank document
that can be generated by the Anvil.

### Hammer

A `Hammer` is used to process data.

### Smelter

A `Smelter` loads and transforms input data into usable data.

## Data Formats

### FormForge Job (`.ffj`)

JSON-based data format that encodes necessary data to generate the finished form

#### Data Fields

The following data fields are available for use in a FormForge Job

##### template

Optional absolute path to an existing PDF document that should be used as the base for forging. If omitted, a blank
document will be used for the base.

##### filename

The name that should be used for the final form output.

##### fields

List of fields to render on the form

Available field types:

- Text
- Image
- Barcode
- Shape

##### setup

Optional JSON list object housing positional data for form fields. This data can also be written to a `.ffs` file and
referenced with the absolute path as a string.

#### Example

```json
{
  "template": "/home/formforge/templates/invoice_template.pdf",
  "filename": "/home/formforge/output/invoice_1234.pdf",
  "fields": [
    {
      "name": "AutomationBarcode",
      "type": "text",
      "text": "E311224012345-1",
      "position": {
        "x": 300,
        "y": 50,
        "rotation": 90
      },
      "font": {
        "name": "Free3of9",
        "size": 14,
        "format": []
      }
    },
    {
      "name": "CustomerName",
      "text": "John Doe",
      "type": "text",
      "position": {
        "x": 100,
        "y": 700
      },
      "font": {
        "name": "Helvetica-Bold",
        "size": 14,
        "format": [
          "underline"
        ]
      }
    },
    {
      "name": "CustomerAddress",
      "text": "123 Main Street",
      "type": "text",
      "position": {
        "x": 100,
        "y": 680
      },
      "font": {
        "name": "Helvetica",
        "size": 12
      }
    }
  ]
}

```

#### Setup Example:

<div style="text-align:right">exampleJob.ffj</div>

```json 
{
  "template": "/home/formforge/templates/invoice_template.pdf",
  "filename": "/home/formforge/output/invoice_1234.pdf",
  "setup": [
    {
      "name": "AutomationBarcode",
      "type": "text",
      "position": {
        "x": 300,
        "y": 50,
        "rotation": 90
      },
      "font": {
        "name": "Free3of9",
        "size": 14,
        "format": []
      }
    },
    {
      "name": "CustomerName",
      "type": "text",
      "position": {
        "x": 100,
        "y": 700
      },
      "font": {
        "name": "Helvetica-Bold",
        "size": 14,
        "format": [
          "underline"
        ]
      }
    }
  ],
  "fields": [
    {
      "name": "AutomationBarcode",
      "text": "E311224012345-1"
    },
    {
      "name": "CustomerName",
      "text": "John Doe"
    }
  ]
}
```

<div style="text-align:right">JobSetup.ffs</div>

```json 
[
  {
    "name": "AutomationBarcode",
    "type": "text",
    "position": {
      "x": 300,
      "y": 50,
      "rotation": 90
    },
    "font": {
      "name": "Free3of9",
      "size": 14,
      "format": []
    }
  },
  {
    "name": "CustomerName",
    "type": "text",
    "position": {
      "x": 100,
      "y": 700
    },
    "font": {
      "name": "Helvetica-Bold",
      "size": 14,
      "format": [
        "underline"
      ]
    }
  }
]
```

<div style="text-align:right">exampleJob.ffj</div>

```json 
{
  "template": "/home/formforge/templates/invoice_template.pdf",
  "filename": "/home/formforge/output/invoice_1234.pdf",
  "setup": "/home/formforge/setups/JobSetup.ffs",
  "fields": [
    {
      "name": "AutomationBarcode",
      "text": "E311224012345-1"
    },
    {
      "name": "CustomerName",
      "text": "John Doe"
    }
  ]
}
```

### FormForge Ore & Ingot

An `.ore` file is a proprietary text-based format. The format is designed to use less data than the JSON `.ffj` files
and
can be compressed into an `.ingot` file to be more space efficient.

An `.ingot` file is an `.ore` file which has been compressed using gzip.

##### Example

<div style="text-align:right">BatchJobExample.ore</div>

```
\\ORESTART
000001</home/formforge/template/invoice.pdf\\&\D01=E311224000001-1\F01=Free3of9|14\X01=300\Y10=50\R01=90\D02=John Doe\F02=Helvetica-Bold|14|ul\X02=100\Y02=700\\
000002</home/formforge/template/invoice.pdf\\&\D01=E311224000002-1\F01=Free3of9|14\X01=300\Y10=50\R01=90\D02=Jane Doe\F02=Helvetica-Bold|14|ul\X02=100\Y02=700\\
\\ORESTOP
```
